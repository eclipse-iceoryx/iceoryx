@startuml

title StatusPort overview

skinparam classAttributeIconSize 0

enum ActiveChunk {
  FIRST
  SECOND
}

class Transaction {
  +activeChunk: ActiveChunk
  +abaCounter: uint32_t
}

class StatusPortData {
  +latestTransaction: std::atomic<Transaction>
  +serviceDescription: capro::ServiceDescription
  +chunks: SharedChunk[2]
}

class StatusPortReader<T> {
  +StatusPortReader(statusPortDataRef: const StatusPortData&)
  +read(callable: cxx::function_ref<void(const T&)>): void
  ' Open question if copy() is wanted
  'copy(callable: cxx::function_ref<void(const T&)>): void)
  -getMembers() const: const StatusPortData&
  -getMembers(): StatusPortData&
  -enableEvent(triggerHandle: iox::popo::TriggerHandle&&, event: const StatusPortEvents): void
  -disableEvent(event: const StatusPortEvents): void
  ' Some more methods need to be implemented in the StatusPortReader to be attachable to a Listener
  ' See https://github.com/eclipse-iceoryx/iceoryx/blob/master/iceoryx_examples/waitset/ice_waitset_trigger.cpp
  ' Open question if copy() is wanted
  '-m_copyOfUserData: T
  -m_statusPortDataRef: const StatusPortData&
}


class StatusPortWriter<T> {
  +StatusPortWriter(statusPortDataRef: StatusPortData&)
  +store(callable: cxx::function_ref<void(T&)>): void
  -getMembers() const: const StatusPortData&
  -getMembers(): StatusPortData&
  -m_statusPortDataRef: StatusPortData&
}

StatusPortWriter ..> StatusPortData
StatusPortReader ..> StatusPortData

@enduml
